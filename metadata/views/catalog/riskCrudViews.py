from django.views.generic import ListView
from django.views.generic.edit import CreateView, DeleteView
from catalog.forms import RiskQuestionsForm

from django.contrib.auth.decorators import login_required, permission_required
from django.utils.decorators import method_decorator

from .models import RiskQuestions


decorators = [login_required(login_url='catalog:login')]

#########################################################################
#### Create: requires catalog.add_riskquestions user permission.
#########################################################################

@method_decorator(decorators, name='dispatch')
@method_decorator(permission_required('catalog.add_riskquestions', \
    raise_exception=True), name='dispatch')
class AddRiskQuestions(CreateView):
    ### Template to add a risk question.
    form_class = RiskQuestionsForm

    template_name = 'catalog/addRiskQuestions.html'
    success_url = '/catalog/risk/questions/list/'

#########################################################################
#### Read: requires catalog.read_riskquestions user permission.
#########################################################################

@method_decorator(decorators, name='dispatch')
@method_decorator(permission_required('catalog.read_riskquestions', \
    raise_exception=True), name='dispatch')
class ListRiskQuestions(ListView):
    ### Lists all the risk questions at database.
    model = RiskQuestions
    template_name = 'catalog/listRiskQuestions.html'

#########################################################################
#### Delete: requires catalog.delete_riskquestions user permission.
#########################################################################

@method_decorator(decorators, name='dispatch')
@method_decorator(permission_required('catalog.delete_riskquestions', \
    raise_exception=True), name='dispatch')
class DeleteRiskQuestions(DeleteView):
    ### Template to delete a risk question.
    model = RiskQuestions
    permission_required('catalog.delete_riskquestions')
    template_name = 'catalog/deleteRiskQuestions.html'
    success_url = '/catalog/risk/questions/list/'
